<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>QNA Travel</title>
  <style>
    :root{
      --bg:#f7f7f7; --card:#fff; --text:#111; --muted:#666; --border:#ddd;
      --brand:#111; --brandText:#fff;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans TC",sans-serif;background:var(--bg);color:var(--text)}
    header{position:sticky;top:0;z-index:9;background:rgba(255,255,255,.92);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    .topbar{max-width:980px;margin:0 auto;padding:12px 16px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{font-weight:700;letter-spacing:.2px}
    nav{display:flex;gap:14px;flex-wrap:wrap}
    nav a{color:var(--text);text-decoration:none;font-size:14px;padding:6px 8px;border-radius:10px}
    nav a:hover{background:#f1f1f1}
    nav a.active{text-decoration:underline;font-weight:600}
    .container{max-width:980px;margin:18px auto;padding:0 16px}
    .grid{display:grid;gap:12px}
    @media(min-width:860px){ .grid-2{grid-template-columns:1.2fr .8fr} }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px}
    .title{font-size:22px;font-weight:700;margin:0 0 8px}
    .muted{color:var(--muted);font-size:14px}
    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--brand);color:var(--brandText);border:none;border-radius:10px;padding:8px 12px;font-size:14px;cursor:pointer}
    .btn.secondary{background:#fff;color:#111;border:1px solid var(--border)}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .list{display:flex;flex-direction:column;gap:10px}
    .item{display:flex;align-items:flex-start;justify-content:space-between;gap:10px}
    .item h3{margin:0;font-size:16px}
    .item p{margin:3px 0 0;color:var(--muted);font-size:13px}
    .hr{height:1px;background:var(--border);margin:12px 0}
    input{border:1px solid var(--border);border-radius:10px;padding:10px 12px;font-size:14px;background:#fff;outline:none}
    input:focus{border-color:#aaa}
    .right{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .star{cursor:pointer;user-select:none;font-size:18px;line-height:1}
    .star.on{color:#f5a623}
    .small{font-size:12px;color:var(--muted)}
    .footerNote{margin-top:10px;color:var(--muted);font-size:12px}
    .dayCard{border:1px solid var(--border);border-radius:14px;padding:14px;margin:12px 0;background:#fff}
    .dayHead{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:flex-end}
    .dayTitle{margin:0;font-size:16px;font-weight:700}
    .dayMeta{color:var(--muted);font-size:13px}
    .slot{display:grid;grid-template-columns:70px 1fr;gap:10px;padding:8px 0;border-top:1px solid #eee}
    .slot:first-of-type{border-top:none}
  </style>
</head>

<body>
<header>
  <div class="topbar">
    <div class="brand">QNA & Peter Travel âœˆï¸</div>
    <nav id="nav">
      <a href="#home" data-route="home" class="active">Home</a>
      <a href="#itinerary" data-route="itinerary">Itinerary</a>
      <a href="#explore" data-route="explore">Explore</a
    </nav>
  </div>
</header>

<div class="container" id="app"></div>

<script>
/** --------------------------
 * Data
 * -------------------------- */
const app = document.getElementById("app");

const trips = [
  { id:"italy-2026", name:"Italy Trip", city:"Rome â†’ Florence â†’ Venice â†’ Rome", days:7, date:"4/5â€“4/11" }
];

// âœ… æ›´å¥½è®€ï¼šåœ‹å®¶ â†’ åŸå¸‚ â†’ é¡å‹ï¼ˆspot / food / cafe / dessertï¼‰
const PLACE_DB = {
  Italy: {
    Rome: {
      spot: [
        { id:"it-rome-colosseum", name:"ç¾…é¦¬ç«¶æŠ€å ´ Colosseum", tags:["å¿…å»","å¤è¹Ÿ"] },
        { id:"it-rome-forum", name:"å¤ç¾…é¦¬å»£å ´ Roman Forum", tags:["å¤è¹Ÿ","æ­·å²"] },
        { id:"it-rome-pantheon", name:"è¬ç¥æ®¿ Pantheonï¼ˆå¤–è§€ï¼‰", tags:["å»ºç¯‰","å¸‚ä¸­å¿ƒ"] },
        { id:"it-rome-trevi", name:"ç‰¹é›·ç¶­å™´æ³‰ Trevi Fountain", tags:["å¿…å»","æ‹ç…§"] },
        { id:"it-rome-spanish", name:"è¥¿ç­ç‰™å°éš Spanish Steps", tags:["é€›è¡—","æ‹ç…§"] },
        { id:"it-rome-navona", name:"ç´æ²ƒç´å»£å ´ Piazza Navona", tags:["å»£å ´","æ•£æ­¥"] },
        { id:"it-rome-vatican", name:"æ¢µè’‚å²¡è–å½¼å¾—å»£å ´ St. Peterâ€™s Square", tags:["å®—æ•™","åœ°æ¨™"] },
      ],
      food: [
        { id:"it-rome-armando", name:"Armando al Pantheon", tags:["å‚³çµ±æ–™ç†","é«˜è©•åƒ¹"] },
        { id:"it-rome-daenzo", name:"Da Enzo al 29", tags:["åœ¨åœ°äººæ°£","æ’éšŠåº—"] },
        { id:"it-rome-roscioli", name:"Roscioli Salumeria con Cucina", tags:["ç¾©å¤§åˆ©éºµ","ç†Ÿé£Ÿ"] },
        { id:"it-rome-aimarmi", name:"Pizzeria Ai Marmi", tags:["æŠ«è–©","å¹³åƒ¹"] },
      ],
      cafe: [
        { id:"it-rome-greco", name:"Antico CaffÃ¨ Greco", tags:["ç™¾å¹´å’–å•¡","ç¶“å…¸"] },
        { id:"it-rome-tazza", name:"Tazza dâ€™Oro", tags:["ç²¾å“å’–å•¡","è¬ç¥æ®¿é™„è¿‘"] },
        { id:"it-rome-eustachio", name:"Santâ€™Eustachio Il CaffÃ¨", tags:["äººæ°£å’–å•¡"] },
      ],
      dessert: [
        { id:"it-rome-giolitti", name:"Giolitti Gelato", tags:["å†°æ·‡æ·‹","è€åº—"] },
        { id:"it-rome-teatro", name:"Gelateria del Teatro", tags:["å†°æ·‡æ·‹","é«˜è©•åƒ¹"] },
      ],
    },

    Florence: {
      spot: [
        { id:"it-flo-duomo", name:"è–æ¯ç™¾èŠ±å¤§æ•™å ‚ Florence Cathedral", tags:["å¿…å»","åœ°æ¨™"] },
        { id:"it-flo-duomo-square", name:"ä¸»æ•™åº§å ‚å»£å ´ Piazza del Duomo", tags:["å¸‚ä¸­å¿ƒ","æ•£æ­¥"] },
        { id:"it-flo-signoria", name:"é ˜ä¸»å»£å ´ Piazza della Signoria", tags:["é›•å¡‘","å»£å ´"] },
        { id:"it-flo-vecchio", name:"è€æ©‹ Ponte Vecchio", tags:["å¤œæ™¯","æ‹ç…§"] },
        { id:"it-flo-michelangelo", name:"ç±³é–‹æœ—åŸºç¾…å»£å ´ Piazzale Michelangelo", tags:["å¤•é™½","å±•æœ›å°"] },
        { id:"it-flo-mercato", name:"ä¸­å¤®å¸‚å ´ Mercato Centrale", tags:["ç¾é£Ÿ","å¸‚é›†"] },
      ],
      food: [
        { id:"it-flo-zaza", name:"Trattoria ZÃ  ZÃ ", tags:["æ‰˜æ–¯å¡å°¼æ–™ç†","äººæ°£"] },
        { id:"it-flo-bucamario", name:"Buca Mario", tags:["ä¸éª¨ç‰›æ’","è€åº—"] },
        { id:"it-flo-4leoni", name:"Trattoria 4 Leoni", tags:["æ¾éœ²ç¾©å¤§åˆ©éºµ"] },
        { id:"it-flo-santospirito", name:"Osteria Santo Spirito", tags:["åœ¨åœ°é¤é¤¨"] },
      ],
      cafe: [
        { id:"it-flo-gilli", name:"CaffÃ¨ Gilli", tags:["ç™¾å¹´å’–å•¡é¤¨"] },
        { id:"it-flo-ditta", name:"Ditta Artigianale", tags:["ç²¾å“å’–å•¡"] },
        { id:"it-flo-faro", name:"Faro â€“ CaffÃ¨ Specialty", tags:["æ‰‹æ²–å’–å•¡"] },
      ],
      dessert: [
        { id:"it-flo-carraia", name:"La Carraia Gelato", tags:["å†°æ·‡æ·‹","é«˜è©•åƒ¹"] },
        { id:"it-flo-percheno", name:"PerchÃ© No! Gelato", tags:["è€å­—è™Ÿ"] },
      ],
    },

    Venice: {
      spot: [
        { id:"it-ven-stmark", name:"è–é¦¬å¯å»£å ´ St Markâ€™s Square", tags:["å¿…å»","åœ°æ¨™"] },
        { id:"it-ven-basilica", name:"è–é¦¬å¯å¤§æ•™å ‚ St Markâ€™s Basilica", tags:["å®—æ•™","å¤–è§€"] },
        { id:"it-ven-doge", name:"ç¸½ç£å®® Dogeâ€™s Palace", tags:["æ­·å²","å¤–è§€"] },
        { id:"it-ven-rialto", name:"é‡Œäºæ‰˜æ©‹ Rialto Bridge", tags:["æ‹ç…§","é‹æ²³"] },
        { id:"it-ven-burano", name:"å¸ƒæ‹‰è«¾å½©è‰²å³¶ Burano", tags:["å½©è‰²å°å³¶","æ‹ç…§"] },
        { id:"it-ven-accademia", name:"å­¸é™¢æ©‹ Accademia Bridge", tags:["å¤•é™½","æ©‹"] },
      ],
      food: [
        { id:"it-ven-carampane", name:"Antiche Carampane", tags:["æµ·é®®","é«˜è©•åƒ¹"] },
        { id:"it-ven-daivo", name:"Da Ivo", tags:["å‚³çµ±æ–™ç†"] },
        { id:"it-ven-madonna", name:"Trattoria Alla Madonna", tags:["è€å­—è™Ÿ"] },
        { id:"it-ven-testiere", name:"Osteria alle Testiere", tags:["å°è€Œç²¾ç·»","éœ€è¨‚ä½"] },
      ],
      cafe: [
        { id:"it-ven-florian", name:"CaffÃ¨ Florian", tags:["ç™¾å¹´å’–å•¡é¤¨","è–é¦¬å¯å»£å ´"] },
        { id:"it-ven-cannaregio", name:"Torrefazione Cannaregio", tags:["å’–å•¡","åœ¨åœ°"] },
        { id:"it-ven-sullaluna", name:"Sullaluna", tags:["æ›¸åº—å’–å•¡"] },
      ],
      dessert: [
        { id:"it-ven-nico", name:"Gelateria Nico", tags:["å†°æ·‡æ·‹","æ²³å²¸"] },
        { id:"it-ven-natura", name:"Gelato di Natura", tags:["æ‰‹å·¥å†°æ·‡æ·‹"] },
      ],
    },
  },
};

// âœ… è½‰å›ä½ åŸæœ¬ç”¨çš„ places é™£åˆ—ï¼ˆå®Œå…¨ç›¸å®¹æ—¢æœ‰ç¨‹å¼ï¼‰
function flattenPlaces(db){
  const out = [];
  for(const [country, cities] of Object.entries(db)){
    for(const [area, types] of Object.entries(cities)){
      for(const [type, items] of Object.entries(types)){
        for(const item of items){
          out.push({ ...item, country, area, type });
        }
      }
    }
  }
  return out;
}

const places = flattenPlaces(PLACE_DB);



const itinerary = [
  { day:1, date:"4/5", city:"Florence", move:"Rome â†’ Florence", items:[
    { period:"ä¸Šåˆ", zh:"ç¾…é¦¬æ­é«˜éµå‰å¾€ä½›ç¾…å€«æ–¯", en:"Train from Rome to Florence" },
    { period:"ä¸‹åˆ", zh:"ä½›ç¾…å€«æ–¯ä¸»æ•™åº§å ‚ï¼ˆå¤–è§€ï¼‰", en:"Florence Cathedral (Duomo, exterior)" },
    { period:"ä¸‹åˆ", zh:"ä¸»æ•™åº§å ‚å»£å ´", en:"Piazza del Duomo" },
    { period:"å‚æ™š", zh:"é ˜ä¸»å»£å ´", en:"Piazza della Signoria" },
    { period:"æ™šä¸Š", zh:"è€æ©‹å¤œæ™¯", en:"Ponte Vecchio" },
  ]},
  { day:2, date:"4/6", city:"Florence", items:[
    { period:"ä¸Šåˆ", zh:"Oltrarno å¥§çˆ¾ç‰¹æ‹‰è«¾ç”Ÿæ´»å€æ•£æ­¥", en:"Oltrarno district walk" },
    { period:"ä¸‹åˆ", zh:"æ³¢æ³¢é‡ŒèŠ±åœ’", en:"Boboli Gardens" },
    { period:"å‚æ™š", zh:"ç±³é–‹æœ—åŸºç¾…å»£å ´çœ‹å¤•é™½", en:"Piazzale Michelangelo viewpoint" },
  ]},
  { day:3, date:"4/7", city:"Venice", move:"Florence â†’ Venice", items:[
    { period:"ä¸Šåˆ", zh:"ä½›ç¾…å€«æ–¯æ­é«˜éµå‰å¾€å¨å°¼æ–¯", en:"Train from Florence to Venice" },
    { period:"ä¸‹åˆ", zh:"è–é¦¬å¯å»£å ´", en:"St Mark's Square" },
    { period:"å‚æ™š", zh:"è–é¦¬å¯å¤§æ•™å ‚ï¼ˆå¤–è§€ï¼‰", en:"St Mark's Basilica (exterior)" },
    { period:"æ™šä¸Š", zh:"ç¸½ç£å®®ï¼ˆå¤–è§€ï¼‰", en:"Doge's Palace (exterior)" },
  ]},
  { day:4, date:"4/8", city:"Venice", items:[
    { period:"ä¸Šåˆ", zh:"é‡Œäºæ‰˜æ©‹", en:"Rialto Bridge" },
    { period:"ä¸Šåˆ", zh:"é‡Œäºæ‰˜å¸‚å ´", en:"Rialto Market" },
    { period:"ä¸‹åˆ", zh:"å¸ƒæ‹‰è«¾å½©è‰²å³¶", en:"Burano Island" },
    { period:"å‚æ™š", zh:"å­¸é™¢æ©‹å¤•æ™¯", en:"Accademia Bridge" },
  ]},
  { day:5, date:"4/9", city:"Rome", move:"Venice â†’ Rome", items:[
    { period:"ä¸Šåˆ", zh:"å¨å°¼æ–¯æ­é«˜éµå›ç¾…é¦¬", en:"Train from Venice to Rome" },
    { period:"ä¸‹åˆ", zh:"æ¢µè’‚å²¡åŸåœ‹æ•£æ­¥", en:"Vatican City walk" },
    { period:"ä¸‹åˆ", zh:"è–å½¼å¾—å»£å ´", en:"St. Peterâ€™s Square" },
    { period:"å‚æ™š", zh:"è–å½¼å¾—å¤§æ•™å ‚ï¼ˆå¤–è§€ï¼‰", en:"St. Peterâ€™s Basilica (exterior)" },
    { period:"æ™šä¸Š", zh:"è–å¤©ä½¿å ¡ï¼ˆå¤–è§€æ•£æ­¥ï¼‰", en:"Castel Santâ€™Angelo (exterior)" },
  ]},
  { day:6, date:"4/10", city:"Rome", items:[
    { period:"ä¸Šåˆ", zh:"ç¾…é¦¬ç«¶æŠ€å ´", en:"Colosseum" },
    { period:"ä¸Šåˆ", zh:"å¤ç¾…é¦¬å»£å ´ï¼ˆå¤–åœæ•£æ­¥ï¼‰", en:"Roman Forum (outside area walk)" },
    { period:"ä¸­åˆ", zh:"çœŸç†ä¹‹å£æ‹ç…§", en:"Bocca della VeritÃ " },
    { period:"å‚æ™š", zh:"å¨å°¼æ–¯å»£å ´", en:"Piazza Venezia" },
  ]},
  { day:7, date:"4/11", city:"Rome", items:[
    { period:"ä¸Šåˆ", zh:"è¬ç¥æ®¿ï¼ˆå¤–è§€ï¼‰", en:"Pantheon (exterior)" },
    { period:"ä¸­åˆ", zh:"ç´æ²ƒç´å»£å ´", en:"Piazza Navona" },
    { period:"ä¸‹åˆ", zh:"ç‰¹é›·ç¶­å™´æ³‰", en:"Trevi Fountain" },
    { period:"å‚æ™š", zh:"è¥¿ç­ç‰™å°éš", en:"Spanish Steps" },
  ]},
];

/** --------------------------
 * Favorites
 * -------------------------- */
const FAV_KEY = "qna_travel_favs";
function getFavs(){ try { return new Set(JSON.parse(localStorage.getItem(FAV_KEY) || "[]")); } catch { return new Set(); } }
function saveFavs(set){ localStorage.setItem(FAV_KEY, JSON.stringify([...set])); }
let favs = getFavs();

function star(placeId){
  const on = favs.has(placeId);
  favs[on ? "delete" : "add"](placeId);
  saveFavs(favs);
  render();
}

/** --------------------------
 * Router + nav active
 * -------------------------- */
function setActive(route){
  document.querySelectorAll("#nav a").forEach(a=>{
    a.classList.toggle("active", a.dataset.route === route);
  });
}
function route(){
  return (location.hash || "#home").replace("#","");
}
window.addEventListener("hashchange", render);

/** --------------------------
 * Views
 * -------------------------- */
function renderHome(){
  const t = trips[0];
  app.innerHTML = `
    <div class="grid grid-2">
      <div class="card">
        <div class="muted">Next Trip</div>
        <h1 class="title">${t.name}</h1>
        <div class="muted">${t.city} Â· ${t.days} days Â· ${t.date}</div>
        <div class="hr"></div>
        <div class="row">
          <button class="btn" onclick="location.hash='#itinerary'">æŸ¥çœ‹è¡Œç¨‹ Itinerary</button>
          <button class="btn secondary" onclick="location.hash='#explore'">æ¢ç´¢æ¨è–¦ Explore</button>
        </div>
        <div class="footerNote">Tipï¼šæ”¶è—æœƒç”¨ â­ å­˜åœ¨ä½ çš„ç€è¦½å™¨ã€‚</div>
      </div>

      <div class="card">
        <div class="muted">Quick Picks</div>
        <h2 class="title" style="font-size:18px;margin-top:6px;">ç†±é–€æ”¶è—</h2>
        <div class="list">${renderFavList()}</div>
      </div>
    </div>
  `;
}

function renderFavList(){
  const favArr = [...favs].map(id=>places.find(p=>p.id===id)).filter(Boolean);
  if(favArr.length === 0) return `<div class="muted">ç›®å‰é‚„æ²’æœ‰æ”¶è—ï¼Œå» Explore é» â­ æ”¶è—å§ã€‚</div>`;
  return favArr.slice(0,6).map(p=>`
    <div class="item">
      <div>
        <h3>${p.name}</h3>
        <p>${p.area} Â· ${labelType(p.type)}</p>
      </div>
      <div class="right">
        <span class="star on" title="å–æ¶ˆæ”¶è—" onclick="star('${p.id}')">â˜…</span>
      </div>
    </div>
  `).join("");
}

function renderTrips(){
  app.innerHTML = `
    <div class="card">
      <h1 class="title">Trips</h1>
      <div class="list">
        ${trips.map(t=>`
          <div class="item">
            <div>
              <h3>${t.name}</h3>
              <p>${t.city} Â· ${t.days} days Â· ${t.date}</p>
            </div>
            <div class="right">
              <button class="btn secondary" onclick="location.hash='#itinerary'">Open itinerary</button>
            </div>
          </div>
        `).join("")}
      </div>
    </div>
  `;
}

function renderItinerary(){
  const t = trips[0];
  app.innerHTML = `
    <div class="card">
      <div class="muted">Itinerary</div>
      <h1 class="title">${t.name}</h1>
      <div class="muted">${t.city} Â· ${t.days} days Â· ${t.date}</div>

      <div class="hr"></div>

      ${itinerary.map(d=>`
        <div class="dayCard" id="day-${d.day}">
          <div class="dayHead">
            <div>
              <div class="dayTitle">Day ${d.day} (${d.date}) Â· ${d.city}</div>
              <div class="dayMeta">${d.move ? d.move : ""}</div>
            </div>
          </div>

          <div style="margin-top:8px;">
            ${d.items.map(i=>`
              <div class="slot">
                <div class="small">${i.period}</div>
                <div>${i.zh}ï½œ${i.en}</div>
              </div>
            `).join("")}
          </div>
        </div>
      `).join("")}

      <div class="footerNote">è¦ä¸è¦æˆ‘å¹«ä½ åŠ ã€ŒDay7 ç¾…é¦¬è‡ªç”±æ™‚é–“ã€æˆ–è£œä¸Šé¤å»³æ¸…å–®ï¼Ÿ</div>
    </div>
  `;
}

function applyFilter(){
  const q = (document.getElementById("q")?.value || "").toLowerCase().trim();
  const type = window.__type || "all";

  // å…ˆä¾æ¢ä»¶éæ¿¾
  const filtered = places.filter(p=>{
    const matchType = (type==="all") ? true : p.type === type;
    const hay = (p.name+" "+(p.country||"")+" "+(p.area||"")+" "+(p.tags||[]).join(" ")).toLowerCase();
    const matchQ = q ? hay.includes(q) : true;
    return matchType && matchQ;
  });

  const list = document.getElementById("placeList");
  if(!filtered.length){
    list.innerHTML = `<div class="muted">æ²’æœ‰ç¬¦åˆçš„çµæœï¼Œæ›å€‹é—œéµå­—æˆ–èª¿æ•´é¡å‹ç¯©é¸è©¦è©¦ã€‚</div>`;
    return;
  }

  // åœ‹å®¶æ’åºï¼ˆå¯è‡ªå·±èª¿æ•´ï¼‰
  const countryOrder = ["Italy"];
  const countries = [...new Set(filtered.map(p=>p.country || "Other"))]
    .sort((a,b)=> (countryOrder.indexOf(a) - countryOrder.indexOf(b)) || a.localeCompare(b));

  // ä¾ åœ‹å®¶â†’åŸå¸‚ åˆ†çµ„
  const byCountry = Object.groupBy ? Object.groupBy(filtered, p=>p.country || "Other")
                                   : groupBy(filtered, p=>p.country || "Other");

  list.innerHTML = countries.map(country=>{
    const itemsInCountry = byCountry[country] || [];
    const areas = [...new Set(itemsInCountry.map(p=>p.area || "Other"))].sort();

    const byArea = Object.groupBy ? Object.groupBy(itemsInCountry, p=>p.area || "Other")
                                  : groupBy(itemsInCountry, p=>p.area || "Other");

    return `
      <div style="margin:10px 0 18px;">
        <div style="font-weight:800;font-size:18px;margin:10px 0;">${country}</div>

        ${areas.map(area=>{
          const itemsInArea = byArea[area] || [];
          return `
            <div class="card" style="margin:10px 0;">
              <div style="font-weight:700;font-size:16px;margin-bottom:8px;">${area}</div>
              <div class="list">
                ${itemsInArea.map(p=>`
                  <div class="item">
                    <div>
                      <h3>${p.name}</h3>
                      <p>${labelType(p.type)}${p.tags?.length ? ` Â· #${p.tags.join(" #")}` : ""}</p>
                    </div>
                    <div class="right">
                      <span class="star ${favs.has(p.id) ? "on" : ""}" onclick="star('${p.id}')"
                        title="${favs.has(p.id) ? "å–æ¶ˆæ”¶è—" : "åŠ å…¥æ”¶è—"}">${favs.has(p.id) ? "â˜…" : "â˜†"}</span>
                    </div>
                  </div>
                `).join("")}
              </div>
            </div>
          `;
        }).join("")}
      </div>
    `;
  }).join("");
}

  function typeEmoji(t){
  const map = { spot:"ğŸ“", food:"ğŸ½ï¸", cafe:"â˜•", dessert:"ğŸ°" };
  return map[t] || "â€¢";
}
/* å…¼å®¹èˆŠç€è¦½å™¨ï¼šå¦‚æœæ²’æœ‰ Object.groupBy å°±ç”¨é€™å€‹ */
function groupBy(arr, keyFn){
  return arr.reduce((acc, x)=>{
    const k = keyFn(x);
    (acc[k] ||= []).push(x);
    return acc;
  }, {});
}
