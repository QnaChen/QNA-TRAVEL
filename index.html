<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>QNA Travel</title>
  <style>
    :root{
      --bg:#f7f7f7; --card:#fff; --text:#111; --muted:#666; --border:#ddd;
      --brand:#111; --brandText:#fff;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans TC",sans-serif;background:var(--bg);color:var(--text)}
    header{position:sticky;top:0;z-index:9;background:rgba(255,255,255,.92);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    .topbar{max-width:980px;margin:0 auto;padding:12px 16px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{font-weight:700;letter-spacing:.2px}
    nav{display:flex;gap:14px;flex-wrap:wrap}
    nav a{color:var(--text);text-decoration:none;font-size:14px;padding:6px 8px;border-radius:10px}
    nav a:hover{background:#f1f1f1}
    nav a.active{text-decoration:underline;font-weight:600}
    .container{max-width:980px;margin:18px auto;padding:0 16px}
    .grid{display:grid;gap:12px}
    @media(min-width:860px){ .grid-2{grid-template-columns:1.2fr .8fr} }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px}
    .title{font-size:22px;font-weight:700;margin:0 0 8px}
    .muted{color:var(--muted);font-size:14px}
    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--brand);color:var(--brandText);border:none;border-radius:10px;padding:8px 12px;font-size:14px;cursor:pointer}
    .btn.secondary{background:#fff;color:#111;border:1px solid var(--border)}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .list{display:flex;flex-direction:column;gap:10px}
    .item{display:flex;align-items:flex-start;justify-content:space-between;gap:10px}
    .item h3{margin:0;font-size:16px}
    .item p{margin:3px 0 0;color:var(--muted);font-size:13px}
    .hr{height:1px;background:var(--border);margin:12px 0}
    input{border:1px solid var(--border);border-radius:10px;padding:10px 12px;font-size:14px;background:#fff;outline:none}
    input:focus{border-color:#aaa}
    .right{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .star{cursor:pointer;user-select:none;font-size:18px;line-height:1}
    .star.on{color:#f5a623}
    .small{font-size:12px;color:var(--muted)}
    .footerNote{margin-top:10px;color:var(--muted);font-size:12px}
    .dayCard{border:1px solid var(--border);border-radius:14px;padding:14px;margin:12px 0;background:#fff}
    .dayHead{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:flex-end}
    .dayTitle{margin:0;font-size:16px;font-weight:700}
    .dayMeta{color:var(--muted);font-size:13px}
    .slot{display:grid;grid-template-columns:70px 1fr;gap:10px;padding:8px 0;border-top:1px solid #eee}
    .slot:first-of-type{border-top:none}
  </style>
</head>

<body>
<header>
  <div class="topbar">
    <div class="brand">QNA Travel ✈️</div>
    <nav id="nav">
      <a href="#home" data-route="home" class="active">Home</a>
      <a href="#itinerary" data-route="itinerary">Itinerary</a>
      <a href="#explore" data-route="explore">Explore</a>
      <a href="#trips" data-route="trips">Trips</a>
    </nav>
  </div>
</header>

<div class="container" id="app"></div>

<script>
/** --------------------------
 * Data
 * -------------------------- */
const app = document.getElementById("app");

const trips = [
  { id:"italy-2026", name:"Italy Trip", city:"Rome → Florence → Venice → Rome", days:7, date:"4/5–4/11" }
];

// Explore 用的清單（你之後可以繼續加）
const places = [

/* ======================
   Italy｜Rome 羅馬
====================== */

{ id:"it-rome-colosseum", name:"羅馬競技場 Colosseum", country:"Italy", area:"Rome", type:"spot", tags:["必去","古蹟"] },
{ id:"it-rome-forum", name:"古羅馬廣場 Roman Forum", country:"Italy", area:"Rome", type:"spot", tags:["古蹟","歷史"] },
{ id:"it-rome-pantheon", name:"萬神殿 Pantheon（外觀）", country:"Italy", area:"Rome", type:"spot", tags:["建築","市中心"] },
{ id:"it-rome-trevi", name:"特雷維噴泉 Trevi Fountain", country:"Italy", area:"Rome", type:"spot", tags:["必去","拍照"] },
{ id:"it-rome-spanish", name:"西班牙台階 Spanish Steps", country:"Italy", area:"Rome", type:"spot", tags:["逛街","拍照"] },
{ id:"it-rome-navona", name:"納沃納廣場 Piazza Navona", country:"Italy", area:"Rome", type:"spot", tags:["廣場","散步"] },
{ id:"it-rome-vatican", name:"梵蒂岡聖彼得廣場 St. Peter’s Square", country:"Italy", area:"Rome", type:"spot", tags:["宗教","地標"] },

{ id:"it-rome-armando", name:"Armando al Pantheon", country:"Italy", area:"Rome", type:"food", tags:["傳統料理","高評價"] },
{ id:"it-rome-daenzo", name:"Da Enzo al 29", country:"Italy", area:"Rome", type:"food", tags:["在地人氣","排隊店"] },
{ id:"it-rome-roscioli", name:"Roscioli Salumeria con Cucina", country:"Italy", area:"Rome", type:"food", tags:["義大利麵","熟食"] },
{ id:"it-rome-aimarmi", name:"Pizzeria Ai Marmi", country:"Italy", area:"Rome", type:"food", tags:["披薩","平價"] },

{ id:"it-rome-greco", name:"Antico Caffè Greco", country:"Italy", area:"Rome", type:"cafe", tags:["百年咖啡","經典"] },
{ id:"it-rome-tazza", name:"Tazza d’Oro", country:"Italy", area:"Rome", type:"cafe", tags:["精品咖啡","萬神殿附近"] },
{ id:"it-rome-eustachio", name:"Sant’Eustachio Il Caffè", country:"Italy", area:"Rome", type:"cafe", tags:["人氣咖啡"] },

{ id:"it-rome-giolitti", name:"Giolitti Gelato", country:"Italy", area:"Rome", type:"dessert", tags:["冰淇淋","老店"] },
{ id:"it-rome-teatro", name:"Gelateria del Teatro", country:"Italy", area:"Rome", type:"dessert", tags:["冰淇淋","高評價"] },

/* ======================
   Italy｜Florence 佛羅倫斯
====================== */

{ id:"it-flo-duomo", name:"聖母百花大教堂 Florence Cathedral", country:"Italy", area:"Florence", type:"spot", tags:["必去","地標"] },
{ id:"it-flo-duomo-square", name:"主教座堂廣場 Piazza del Duomo", country:"Italy", area:"Florence", type:"spot", tags:["市中心","散步"] },
{ id:"it-flo-signoria", name:"領主廣場 Piazza della Signoria", country:"Italy", area:"Florence", type:"spot", tags:["雕塑","廣場"] },
{ id:"it-flo-vecchio", name:"老橋 Ponte Vecchio", country:"Italy", area:"Florence", type:"spot", tags:["夜景","拍照"] },
{ id:"it-flo-michelangelo", name:"米開朗基羅廣場 Piazzale Michelangelo", country:"Italy", area:"Florence", type:"spot", tags:["夕陽","展望台"] },
{ id:"it-flo-mercato", name:"中央市場 Mercato Centrale", country:"Italy", area:"Florence", type:"spot", tags:["美食","市集"] },

{ id:"it-flo-zaza", name:"Trattoria Zà Zà", country:"Italy", area:"Florence", type:"food", tags:["托斯卡尼料理","人氣"] },
{ id:"it-flo-bucamario", name:"Buca Mario", country:"Italy", area:"Florence", type:"food", tags:["丁骨牛排","老店"] },
{ id:"it-flo-4leoni", name:"Trattoria 4 Leoni", country:"Italy", area:"Florence", type:"food", tags:["松露義大利麵"] },
{ id:"it-flo-santospirito", name:"Osteria Santo Spirito", country:"Italy", area:"Florence", type:"food", tags:["在地餐館"] },

{ id:"it-flo-gilli", name:"Caffè Gilli", country:"Italy", area:"Florence", type:"cafe", tags:["百年咖啡館"] },
{ id:"it-flo-ditta", name:"Ditta Artigianale", country:"Italy", area:"Florence", type:"cafe", tags:["精品咖啡"] },
{ id:"it-flo-faro", name:"Faro – Caffè Specialty", country:"Italy", area:"Florence", type:"cafe", tags:["手沖咖啡"] },

{ id:"it-flo-carraia", name:"La Carraia Gelato", country:"Italy", area:"Florence", type:"dessert", tags:["冰淇淋","高評價"] },
{ id:"it-flo-percheno", name:"Perché No! Gelato", country:"Italy", area:"Florence", type:"dessert", tags:["老字號"] },

/* ======================
   Italy｜Venice 威尼斯
====================== */

{ id:"it-ven-stmark", name:"聖馬可廣場 St Mark’s Square", country:"Italy", area:"Venice", type:"spot", tags:["必去","地標"] },
{ id:"it-ven-basilica", name:"聖馬可大教堂 St Mark’s Basilica", country:"Italy", area:"Venice", type:"spot", tags:["宗教","外觀"] },
{ id:"it-ven-doge", name:"總督宮 Doge’s Palace", country:"Italy", area:"Venice", type:"spot", tags:["歷史","外觀"] },
{ id:"it-ven-rialto", name:"里亞托橋 Rialto Bridge", country:"Italy", area:"Venice", type:"spot", tags:["拍照","運河"] },
{ id:"it-ven-burano", name:"布拉諾彩色島 Burano", country:"Italy", area:"Venice", type:"spot", tags:["彩色小島","拍照"] },
{ id:"it-ven-accademia", name:"學院橋 Accademia Bridge", country:"Italy", area:"Venice", type:"spot", tags:["夕陽","橋"] },

{ id:"it-ven-carampane", name:"Antiche Carampane", country:"Italy", area:"Venice", type:"food", tags:["海鮮","高評價"] },
{ id:"it-ven-daivo", name:"Da Ivo", country:"Italy", area:"Venice", type:"food", tags:["傳統料理"] },
{ id:"it-ven-madonna", name:"Trattoria Alla Madonna", country:"Italy", area:"Venice", type:"food", tags:["老字號"] },
{ id:"it-ven-testiere", name:"Osteria alle Testiere", country:"Italy", area:"Venice", type:"food", tags:["小而精緻","需訂位"] },

{ id:"it-ven-florian", name:"Caffè Florian", country:"Italy", area:"Venice", type:"cafe", tags:["百年咖啡館","聖馬可廣場"] },
{ id:"it-ven-cannaregio", name:"Torrefazione Cannaregio", country:"Italy", area:"Venice", type:"cafe", tags:["咖啡","在地"] },
{ id:"it-ven-sullaluna", name:"Sullaluna", country:"Italy", area:"Venice", type:"cafe", tags:["書店咖啡"] },

{ id:"it-ven-nico", name:"Gelateria Nico", country:"Italy", area:"Venice", type:"dessert", tags:["冰淇淋","河岸"] },
{ id:"it-ven-natura", name:"Gelato di Natura", country:"Italy", area:"Venice", type:"dessert", tags:["手工冰淇淋"] }

];


const itinerary = [
  { day:1, date:"4/5", city:"Florence", move:"Rome → Florence", items:[
    { period:"上午", zh:"羅馬搭高鐵前往佛羅倫斯", en:"Train from Rome to Florence" },
    { period:"下午", zh:"佛羅倫斯主教座堂（外觀）", en:"Florence Cathedral (Duomo, exterior)" },
    { period:"下午", zh:"主教座堂廣場", en:"Piazza del Duomo" },
    { period:"傍晚", zh:"領主廣場", en:"Piazza della Signoria" },
    { period:"晚上", zh:"老橋夜景", en:"Ponte Vecchio" },
  ]},
  { day:2, date:"4/6", city:"Florence", items:[
    { period:"上午", zh:"Oltrarno 奧爾特拉諾生活區散步", en:"Oltrarno district walk" },
    { period:"下午", zh:"波波里花園", en:"Boboli Gardens" },
    { period:"傍晚", zh:"米開朗基羅廣場看夕陽", en:"Piazzale Michelangelo viewpoint" },
  ]},
  { day:3, date:"4/7", city:"Venice", move:"Florence → Venice", items:[
    { period:"上午", zh:"佛羅倫斯搭高鐵前往威尼斯", en:"Train from Florence to Venice" },
    { period:"下午", zh:"聖馬可廣場", en:"St Mark's Square" },
    { period:"傍晚", zh:"聖馬可大教堂（外觀）", en:"St Mark's Basilica (exterior)" },
    { period:"晚上", zh:"總督宮（外觀）", en:"Doge's Palace (exterior)" },
  ]},
  { day:4, date:"4/8", city:"Venice", items:[
    { period:"上午", zh:"里亞托橋", en:"Rialto Bridge" },
    { period:"上午", zh:"里亞托市場", en:"Rialto Market" },
    { period:"下午", zh:"布拉諾彩色島", en:"Burano Island" },
    { period:"傍晚", zh:"學院橋夕景", en:"Accademia Bridge" },
  ]},
  { day:5, date:"4/9", city:"Rome", move:"Venice → Rome", items:[
    { period:"上午", zh:"威尼斯搭高鐵回羅馬", en:"Train from Venice to Rome" },
    { period:"下午", zh:"梵蒂岡城國散步", en:"Vatican City walk" },
    { period:"下午", zh:"聖彼得廣場", en:"St. Peter’s Square" },
    { period:"傍晚", zh:"聖彼得大教堂（外觀）", en:"St. Peter’s Basilica (exterior)" },
    { period:"晚上", zh:"聖天使堡（外觀散步）", en:"Castel Sant’Angelo (exterior)" },
  ]},
  { day:6, date:"4/10", city:"Rome", items:[
    { period:"上午", zh:"羅馬競技場", en:"Colosseum" },
    { period:"上午", zh:"古羅馬廣場（外圍散步）", en:"Roman Forum (outside area walk)" },
    { period:"中午", zh:"真理之口拍照", en:"Bocca della Verità" },
    { period:"傍晚", zh:"威尼斯廣場", en:"Piazza Venezia" },
  ]},
  { day:7, date:"4/11", city:"Rome", items:[
    { period:"上午", zh:"萬神殿（外觀）", en:"Pantheon (exterior)" },
    { period:"中午", zh:"納沃納廣場", en:"Piazza Navona" },
    { period:"下午", zh:"特雷維噴泉", en:"Trevi Fountain" },
    { period:"傍晚", zh:"西班牙台階", en:"Spanish Steps" },
  ]},
];

/** --------------------------
 * Favorites
 * -------------------------- */
const FAV_KEY = "qna_travel_favs";
function getFavs(){ try { return new Set(JSON.parse(localStorage.getItem(FAV_KEY) || "[]")); } catch { return new Set(); } }
function saveFavs(set){ localStorage.setItem(FAV_KEY, JSON.stringify([...set])); }
let favs = getFavs();

function star(placeId){
  const on = favs.has(placeId);
  favs[on ? "delete" : "add"](placeId);
  saveFavs(favs);
  render();
}

/** --------------------------
 * Router + nav active
 * -------------------------- */
function setActive(route){
  document.querySelectorAll("#nav a").forEach(a=>{
    a.classList.toggle("active", a.dataset.route === route);
  });
}
function route(){
  return (location.hash || "#home").replace("#","");
}
window.addEventListener("hashchange", render);

/** --------------------------
 * Views
 * -------------------------- */
function renderHome(){
  const t = trips[0];
  app.innerHTML = `
    <div class="grid grid-2">
      <div class="card">
        <div class="muted">Next Trip</div>
        <h1 class="title">${t.name}</h1>
        <div class="muted">${t.city} · ${t.days} days · ${t.date}</div>
        <div class="hr"></div>
        <div class="row">
          <button class="btn" onclick="location.hash='#itinerary'">查看行程 Itinerary</button>
          <button class="btn secondary" onclick="location.hash='#explore'">探索推薦 Explore</button>
        </div>
        <div class="footerNote">Tip：收藏會用 ⭐ 存在你的瀏覽器。</div>
      </div>

      <div class="card">
        <div class="muted">Quick Picks</div>
        <h2 class="title" style="font-size:18px;margin-top:6px;">熱門收藏</h2>
        <div class="list">${renderFavList()}</div>
      </div>
    </div>
  `;
}

function renderFavList(){
  const favArr = [...favs].map(id=>places.find(p=>p.id===id)).filter(Boolean);
  if(favArr.length === 0) return `<div class="muted">目前還沒有收藏，去 Explore 點 ⭐ 收藏吧。</div>`;
  return favArr.slice(0,6).map(p=>`
    <div class="item">
      <div>
        <h3>${p.name}</h3>
        <p>${p.area} · ${labelType(p.type)}</p>
      </div>
      <div class="right">
        <span class="star on" title="取消收藏" onclick="star('${p.id}')">★</span>
      </div>
    </div>
  `).join("");
}

function renderTrips(){
  app.innerHTML = `
    <div class="card">
      <h1 class="title">Trips</h1>
      <div class="list">
        ${trips.map(t=>`
          <div class="item">
            <div>
              <h3>${t.name}</h3>
              <p>${t.city} · ${t.days} days · ${t.date}</p>
            </div>
            <div class="right">
              <button class="btn secondary" onclick="location.hash='#itinerary'">Open itinerary</button>
            </div>
          </div>
        `).join("")}
      </div>
    </div>
  `;
}

function renderItinerary(){
  const t = trips[0];
  app.innerHTML = `
    <div class="card">
      <div class="muted">Itinerary</div>
      <h1 class="title">${t.name}</h1>
      <div class="muted">${t.city} · ${t.days} days · ${t.date}</div>

      <div class="hr"></div>

      ${itinerary.map(d=>`
        <div class="dayCard" id="day-${d.day}">
          <div class="dayHead">
            <div>
              <div class="dayTitle">Day ${d.day} (${d.date}) · ${d.city}</div>
              <div class="dayMeta">${d.move ? d.move : ""}</div>
            </div>
          </div>

          <div style="margin-top:8px;">
            ${d.items.map(i=>`
              <div class="slot">
                <div class="small">${i.period}</div>
                <div>${i.zh}｜${i.en}</div>
              </div>
            `).join("")}
          </div>
        </div>
      `).join("")}

      <div class="footerNote">要不要我幫你加「Day7 羅馬自由時間」或補上餐廳清單？</div>
    </div>
  `;
}

function renderExplore(){
  app.innerHTML = `
    <div class="card">
      <div class="row" style="justify-content:space-between;align-items:flex-end;">
        <div>
          <div class="muted">Explore</div>
          <h1 class="title">推薦景點 / 美食</h1>
          <div class="muted">搜尋 + 收藏 ⭐</div>
        </div>
        <div class="right">
          <input id="q" placeholder="Search name / area / tag..." />
          <button class="btn secondary" onclick="applyFilter()">Search</button>
        </div>
      </div>
      <div class="hr"></div>
      <div class="list" id="placeList"></div>
      <div class="footerNote">Tip：你可以把 type 改成 food/cafe/dessert 之後做分類。</div>
    </div>
  `;
  applyFilter();
}

function applyFilter(){
  const q = (document.getElementById("q")?.value || "").toLowerCase().trim();
  const filtered = places.filter(p=>{
    if(!q) return true;
    const hay = (p.name+" "+p.area+" "+(p.tags||[]).join(" ")).toLowerCase();
    return hay.includes(q);
  });

  const list = document.getElementById("placeList");
  if(!list) return;

  list.innerHTML = filtered.map(p=>`
    <div class="item">
      <div>
        <h3>${p.name}</h3>
        <p>${p.area} · ${labelType(p.type)} ${p.tags?.length? "· #"+p.tags.join(" #"):""}</p>
      </div>
      <div class="right">
        <span class="star ${favs.has(p.id) ? "on" : ""}" onclick="star('${p.id}')"
          title="${favs.has(p.id) ? "取消收藏" : "加入收藏"}">${favs.has(p.id) ? "★" : "☆"}</span>
      </div>
    </div>
  `).join("");
}

function labelType(t){
  const map = { spot:"景點", food:"美食", cafe:"咖啡", dessert:"甜點" };
  return map[t] || t;
}

function render(){
  const r = route();
  setActive(r);
  if(r === "home") return renderHome();
  if(r === "itinerary") return renderItinerary();
  if(r === "explore") return renderExplore();
  if(r === "trips") return renderTrips();
  location.hash = "#home";
}

render();
</script>
</body>
</html>
